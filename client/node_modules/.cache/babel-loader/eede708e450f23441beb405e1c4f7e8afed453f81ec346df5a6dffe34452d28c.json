{"ast":null,"code":"import _regeneratorRuntime from\"/Users/madhusudhana.rk/Desktop/react/divine-collections/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/madhusudhana.rk/Desktop/react/divine-collections/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/madhusudhana.rk/Desktop/react/divine-collections/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../contexts/userContext';import withProtectedAuth from'../HOC/withProtectAuth';import Cards from'./Cards';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Cart=function Cart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isError=_useState4[0],setIsError=_useState4[1];var _useContext=useContext(AuthContext),loginUser=_useContext.state.loginUser;// This method fetches the products from the database.\nuseEffect(function(){function getproducts(){return _getproducts.apply(this,arguments);}function _getproducts(){_getproducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,message,products;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(loginUser._id){_context.next=2;break;}return _context.abrupt(\"return\",null);case 2:_context.next=4;return fetch(\"http://localhost:8000/cart/products/\".concat(loginUser._id));case 4:response=_context.sent;if(response.ok){_context.next=10;break;}message=\"An error occured: \".concat(response.statusText);console.log(message);setIsError(true);return _context.abrupt(\"return\");case 10:_context.next=12;return response.json();case 12:products=_context.sent;setProducts(products);case 14:case\"end\":return _context.stop();}}},_callee);}));return _getproducts.apply(this,arguments);}getproducts();return;},[loginUser]);if(isError){return/*#__PURE__*/_jsxs(\"div\",{className:\"products-wrapper\",children:[\"No Product found. Please return to \",/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\" Home \"}),\" page.\"]});}return/*#__PURE__*/_jsx(\"div\",{className:\"products-wrapper\",children:/*#__PURE__*/_jsx(Cards,{cards:products})});};export default withProtectedAuth(Cart);","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","withProtectedAuth","Cards","Cart","products","setProducts","isError","setIsError","loginUser","state","getproducts","_id","fetch","response","ok","message","statusText","console","log","json"],"sources":["/Users/madhusudhana.rk/Desktop/react/divine-collections/client/src/components/Cart.tsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../contexts/userContext';\nimport withProtectedAuth from '../HOC/withProtectAuth';\nimport { CardsList } from '../utils/types';\nimport Cards from './Cards';\n\nconst Cart : React.FC= () => {\n  const [products, setProducts] = useState<CardsList[]>([]);\n  const [isError, setIsError] = useState(false);\n  const {state: {loginUser}} = useContext(AuthContext);\n  \n  // This method fetches the products from the database.\n  useEffect(() => {\n    async function getproducts() {\n      if (!loginUser._id) {\n        return null\n      }\n      const response = await fetch(`http://localhost:8000/cart/products/${loginUser._id}`);\n\n      if (!response.ok) {\n        const message = `An error occured: ${response.statusText}`;\n        console.log(message);\n        setIsError(true);\n        return;\n      }\n\n      const products = await response.json();\n      setProducts(products);\n    }\n\n    getproducts();\n\n    return; \n  }, [loginUser]);\n\n  if (isError) {\n    return (\n      <div className='products-wrapper'>\n        No Product found. Please return to <a href=\"/\"> Home </a> page.\n      </div>\n    )\n  }\n  \n  return (\n    <div className='products-wrapper'>\n      <Cards cards={products} />\n    </div>\n  )\n}\nexport default withProtectedAuth(Cart);"],"mappings":"4cAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,yBAAyB,CACrD,MAAOC,kBAAiB,KAAM,wBAAwB,CAEtD,MAAOC,MAAK,KAAM,SAAS,CAAC,wFAE5B,GAAMC,KAAe,CAAE,QAAjBA,KAAe,EAAQ,CAC3B,cAAgCJ,QAAQ,CAAc,EAAE,CAAC,wCAAlDK,QAAQ,eAAEC,WAAW,eAC5B,eAA8BN,QAAQ,CAAC,KAAK,CAAC,yCAAtCO,OAAO,eAAEC,UAAU,eAC1B,gBAA6BV,UAAU,CAACG,WAAW,CAAC,CAArCQ,SAAS,aAAjBC,KAAK,CAAGD,SAAS,CAExB;AACAV,SAAS,CAAC,UAAM,SACCY,YAAW,6IAA1B,sKACOF,SAAS,CAACG,GAAG,yDACT,IAAI,+BAEUC,MAAK,+CAAwCJ,SAAS,CAACG,GAAG,EAAG,QAA9EE,QAAQ,kBAETA,QAAQ,CAACC,EAAE,0BACRC,OAAO,6BAAwBF,QAAQ,CAACG,UAAU,EACxDC,OAAO,CAACC,GAAG,CAACH,OAAO,CAAC,CACpBR,UAAU,CAAC,IAAI,CAAC,CAAC,gEAIIM,SAAQ,CAACM,IAAI,EAAE,SAAhCf,QAAQ,eACdC,WAAW,CAACD,QAAQ,CAAC,CAAC,uDACvB,8CAEDM,WAAW,EAAE,CAEb,OACF,CAAC,CAAE,CAACF,SAAS,CAAC,CAAC,CAEf,GAAIF,OAAO,CAAE,CACX,mBACE,aAAK,SAAS,CAAC,kBAAkB,8DACI,UAAG,IAAI,CAAC,GAAG,oBAAW,YACrD,CAEV,CAEA,mBACE,YAAK,SAAS,CAAC,kBAAkB,uBAC/B,KAAC,KAAK,EAAC,KAAK,CAAEF,QAAS,EAAG,EACtB,CAEV,CAAC,CACD,cAAeH,kBAAiB,CAACE,IAAI,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}